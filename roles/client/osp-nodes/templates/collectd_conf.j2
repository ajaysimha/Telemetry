TypesDB "/usr/share/collectd/types.db"
TypesDB "/usr/share/collectd/types.db.custom"

Interval {{ collectd_interval }}

LoadPlugin "logfile"
<Plugin "logfile">
  LogLevel "info"
  File "/var/log/collectd.log"
  Timestamp true
</Plugin>


LoadPlugin syslog
LoadPlugin cpu
LoadPlugin df
LoadPlugin disk
LoadPlugin interface
LoadPlugin load
LoadPlugin memory
LoadPlugin uptime
LoadPlugin network
LoadPlugin exec
Include "/etc/collectd.d"


<Plugin cpu>
  ReportByState true
  ReportByCpu true
  ValuesPercentage true
</Plugin>

<Plugin "memory">
  ValuesAbsolute false
  ValuesPercentage true
</Plugin>


<LoadPlugin "network">
   FlushInterval 5
</LoadPlugin>

<Plugin "df">
#IgnoreSelected true
ValuesPercentage true
reportInodes true
</Plugin>

<Plugin "exec">
Exec  "nobody" "/usr/share/collectd/exec/nfvi-services.sh"
</Plugin>

<Plugin network>
{% for collectd_exporter in groups["collectd_exporters"] %}
Server "{{ collectd_exporter }}" "{{ portnum }}"
{% endfor %}
</Plugin>
